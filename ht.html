<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objekterkennung</title>
    <style>
        img {
            height: 250px;
        }

        .btn {
            border: 1px solid #888;
            cursor: pointer;
            width: 100px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px 0;
        }

        .btn:hover {
            background-color: #eee;
        }
    </style>
</head>
<body>

<img src="https://storage.googleapis.com/tfweb/demos/static/obj_detection.jpeg" crossorigin="anonymous"/>
<div class="btn">Detect</div>
<div class="result"></div>

<script>
    let objectDetector;

    async function detect() {
        if (!objectDetector) {
            objectDetector = await tflite.ObjectDetector.create(
                "https://storage.googleapis.com/tfhub-lite-models/tensorflow/lite-model/ssd_mobilenet_v1/1/metadata/2.tflite",
                { maxResults: 1 }
            );
        }
        const start = Date.now();
        const result = await objectDetector.detect(document.querySelector("img"));
        const boundingBox = result[0].boundingBox;
        const clazz = result[0].classes[0];
        const strResult = `Bounding box: [${boundingBox.originX}, ${
            boundingBox.originY
        }, ${boundingBox.width}, ${boundingBox.height}]. Class: ${
            clazz.className
        }. Latency: ${Date.now() - start} ms`;
        document.querySelector(".result").textContent = strResult;
    }

    document.querySelector(".btn").addEventListener("click", () => {
        detect();
    });
</script>

</body>
</html>
